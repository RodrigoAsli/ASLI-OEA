<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Asesor√≠a para Certificaci√≥n OEA</title>
    <!-- Incluye Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Incluye Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Incluye fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flowchart-step {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .flowchart-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .arrow {
            font-size: 2rem;
            line-height: 1;
            color: #4A90E2;
        }
        .stat-card {
            border-left: 4px solid #4A90E2;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- PALETA DE COLORES: Brilliant Blues -->
    <!-- #003F5C, #374C80, #7A5195, #BC5090, #EF5675, #FF764A, #FFA600 -->
    <!-- CONFIRMACI√ìN: NO se utiliz√≥ Mermaid JS ni SVG en este documento. -->
    
    <!-- PLAN NARRATIVO:
    1.  Introducci√≥n (Hook): ¬øQu√© es OEA? Un t√≠tulo potente y una definici√≥n clara.
    2.  El Valor (Why): Visualizar los beneficios tangibles. Usar un gr√°fico de barras para mostrar el impacto y tarjetas para destacar beneficios.
    3.  El Proceso (How): Mostrar nuestro servicio como un camino claro de 5 pasos. Usar un diagrama de flujo con HTML/CSS.
    4.  Factores Clave (Success): Ilustrar los elementos cr√≠ticos para el √©xito con un gr√°fico de dona.
    5.  Llamada a la Acci√≥n (CTA): Un cierre claro con los pr√≥ximos pasos.
    -->

    <!-- SELECCI√ìN DE VISUALIZACIONES:
    -   Beneficios OEA (Reducci√≥n de Inspecciones): 
        -   Objetivo: Comparar.
        -   Visualizaci√≥n: Gr√°fico de Barras (Bar Chart).
        -   Justificaci√≥n: Ideal para comparar dos estados (Sin OEA vs. Con OEA) de forma clara. 
        -   Librer√≠a/M√©todo: Chart.js (Canvas). NO SVG.
    -   Proceso de Asesor√≠a:
        -   Objetivo: Organizar (Mostrar proceso).
        -   Visualizaci√≥n: Diagrama de Flujo (Flow Chart).
        -   Justificaci√≥n: Muestra una secuencia de pasos de manera l√≥gica y f√°cil de seguir.
        -   Librer√≠a/M√©todo: HTML/CSS con Tailwind. NO SVG.
    -   Claves para el √âxito:
        -   Objetivo: Comparar (Mostrar composici√≥n).
        -   Visualizaci√≥n: Gr√°fico de Dona (Doughnut Chart).
        -   Justificaci√≥n: Muestra la importancia relativa de cada factor para el √©xito del proyecto.
        -   Librer√≠a/M√©todo: Chart.js (Canvas). NO SVG.
    -->

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-black text-[#003F5C] mb-4">Optimice su Comercio Exterior con la Certificaci√≥n OEA</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Convierta a su empresa en un socio confiable para la Aduana y agilice su cadena de suministro global.</p>
        </header>

        <main>
            <section id="que-es-oea" class="mb-16">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-3xl font-bold text-[#003F5C] mb-4 text-center">¬øQu√© es el Operador Econ√≥mico Autorizado (OEA)?</h2>
                    <p class="text-center text-gray-700 mb-6">El OEA es un programa global, voluntario y gratuito de la Organizaci√≥n Mundial de Aduanas (OMA). Su objetivo es fortalecer la seguridad de la cadena de suministro internacional y, a la vez, facilitar el comercio leg√≠timo. Al certificarse, la Aduana reconoce a su empresa como un socio estrat√©gico, seguro y de bajo riesgo.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <span class="text-4xl font-bold text-[#4A90E2]">‚úî</span>
                            <h3 class="font-bold mt-2 text-[#003F5C]">Voluntario</h3>
                            <p class="text-sm text-gray-600">La adhesi√≥n es una decisi√≥n estrat√©gica.</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <span class="text-4xl font-bold text-[#4A90E2]">‚úî</span>
                            <h3 class="font-bold mt-2 text-[#003F5C]">Gratuito</h3>
                            <p class="text-sm text-gray-600">La certificaci√≥n no tiene costo de emisi√≥n.</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <span class="text-4xl font-bold text-[#4A90E2]">‚úî</span>
                            <h3 class="font-bold mt-2 text-[#003F5C]">Global</h3>
                            <p class="text-sm text-gray-600">Reconocido internacionalmente.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="beneficios" class="mb-16">
                <h2 class="text-3xl font-bold text-[#003F5C] mb-8 text-center">La Ventaja Competitiva de ser OEA</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                         <h3 class="text-xl font-bold text-center text-[#374C80] mb-4">Reducci√≥n Significativa de Inspecciones</h3>
                        <p class="text-center text-gray-600 mb-6">Uno de los mayores beneficios es la disminuci√≥n dr√°stica de controles f√≠sicos y documentales, lo que se traduce en menores costos y tiempos de entrega m√°s r√°pidos.</p>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="beneficiosChart"></canvas>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="bg-white rounded-lg shadow-md p-4 flex items-center stat-card">
                            <span class="text-3xl mr-4">‚úàÔ∏è</span>
                            <div>
                                <h4 class="font-bold text-[#374C80]">Agilidad en Aduana</h4>
                                <p class="text-gray-600">Despacho aduanero m√°s r√°pido y con prioridad en caso de controles.</p>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-4 flex items-center stat-card">
                             <span class="text-3xl mr-4">üåç</span>
                             <div>
                                <h4 class="font-bold text-[#374C80]">Reconocimiento Internacional</h4>
                                <p class="text-gray-600">Facilita el acceso a nuevos mercados gracias a los Acuerdos de Reconocimiento Mutuo.</p>
                             </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-4 flex items-center stat-card">
                             <span class="text-3xl mr-4">üõ°Ô∏è</span>
                             <div>
                                <h4 class="font-bold text-[#374C80]">Cadena de Suministro Segura</h4>
                                <p class="text-gray-600">Minimiza riesgos y fortalece la confianza con sus socios comerciales.</p>
                             </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="proceso" class="mb-16">
                <h2 class="text-3xl font-bold text-[#003F5C] mb-8 text-center">Nuestro Proceso de Asesor√≠a: Su Camino a la Certificaci√≥n</h2>
                <p class="text-lg text-gray-600 text-center max-w-3xl mx-auto mb-10">Lo acompa√±amos en cada etapa con un plan de trabajo claro y personalizado para garantizar el √©xito.</p>
                <div class="flex flex-col md:flex-row justify-center items-center md:items-start space-y-4 md:space-y-0 md:space-x-4">
                    <div class="text-center flowchart-step bg-white p-4 rounded-lg shadow-md w-60">
                        <div class="text-3xl font-black text-white bg-[#4A90E2] w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">1</div>
                        <h4 class="font-bold text-[#003F5C]">Diagn√≥stico</h4>
                        <p class="text-sm text-gray-600">Evaluamos su nivel de cumplimiento actual.</p>
                    </div>
                    <div class="arrow hidden md:block mt-12">‚Üí</div>
                    <div class="text-center flowchart-step bg-white p-4 rounded-lg shadow-md w-60">
                        <div class="text-3xl font-black text-white bg-[#7A5195] w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">2</div>
                        <h4 class="font-bold text-[#003F5C]">Dise√±o e Implementaci√≥n</h4>
                        <p class="text-sm text-gray-600">Creamos y aplicamos su plan de seguridad.</p>
                    </div>
                    <div class="arrow hidden md:block mt-12">‚Üí</div>
                    <div class="text-center flowchart-step bg-white p-4 rounded-lg shadow-md w-60">
                        <div class="text-3xl font-black text-white bg-[#BC5090] w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">3</div>
                        <h4 class="font-bold text-[#003F5C]">Documentaci√≥n</h4>
                        <p class="text-sm text-gray-600">Preparamos toda la carpeta para la Aduana.</p>
                    </div>
                    <div class="arrow hidden md:block mt-12">‚Üí</div>
                    <div class="text-center flowchart-step bg-white p-4 rounded-lg shadow-md w-60">
                        <div class="text-3xl font-black text-white bg-[#EF5675] w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">4</div>
                        <h4 class="font-bold text-[#003F5C]">Auditor√≠a</h4>
                        <p class="text-sm text-gray-600">Lo acompa√±amos durante la validaci√≥n oficial.</p>
                    </div>
                     <div class="arrow hidden md:block mt-12">‚Üí</div>
                    <div class="text-center flowchart-step bg-white p-4 rounded-lg shadow-md w-60">
                        <div class="text-3xl font-black text-white bg-[#FF764A] w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">5</div>
                        <h4 class="font-bold text-[#003F5C]">Mantenimiento</h4>
                        <p class="text-sm text-gray-600">Aseguramos el cumplimiento continuo.</p>
                    </div>
                </div>
            </section>

            <section id="claves-exito" class="mb-16">
                <h2 class="text-3xl font-bold text-[#003F5C] mb-8 text-center">Claves para el √âxito del Programa</h2>
                 <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2">
                        <h3 class="text-xl font-bold text-center text-[#374C80] mb-4">Factores Cr√≠ticos de Implementaci√≥n</h3>
                        <p class="text-gray-600 text-center md:text-left">El √©xito de la certificaci√≥n OEA no es solo t√©cnico, depende de un fuerte compromiso organizacional. Nuestra asesor√≠a se enfoca en fortalecer estos pilares dentro de su empresa para asegurar un proceso fluido y resultados duraderos.</p>
                    </div>
                    <div class="md:w-1/2 chart-container h-64 md:h-80">
                        <canvas id="clavesExitoChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section id="cta" class="text-center bg-[#003F5C] text-white rounded-lg shadow-lg p-8 md:p-12">
                <h2 class="text-3xl font-bold mb-4">¬øListo para dar el siguiente paso?</h2>
                <p class="text-lg text-blue-100 mb-6 max-w-2xl mx-auto">Agendemos una reuni√≥n para realizar un diagn√≥stico sin costo y mostrarle en detalle c√≥mo la certificaci√≥n OEA puede potenciar su negocio de exportaci√≥n.</p>
                <a href="mailto:mario.basaez@asli.cl?subject=Interesado en Asesor√≠a OEA" class="bg-[#FFA600] text-[#003F5C] font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-400 transition-colors">Contactar a un Asesor</a>
            </section>
        </main>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>ASESOR√çAS Y SERVICIOS LOG√çSTICOS INTEGRALES &copy; 2025</p>
            <!-- Elemento donde se mostrar√° el contador de vistas -->
            <div id="view-counter" class="mt-2 text-gray-600 text-sm">Cargando contador de vistas...</div>
        </footer>

    </div>

    <script type="module">
        // Funciones de Chart.js y estilos para los gr√°ficos (sin cambios)
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };
    
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            let currentLine = '';
            const lines = [];
            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        };
        
        const benefitsData = {
            labels: ['Empresa Sin OEA', 'Empresa Con OEA'],
            datasets: [{
                label: 'Probabilidad de Inspecci√≥n (%)',
                data: [100, 25],
                backgroundColor: [
                    'rgba(239, 86, 117, 0.6)',
                    'rgba(74, 144, 226, 0.6)'
                ],
                borderColor: [
                    'rgba(239, 86, 117, 1)',
                    'rgba(74, 144, 226, 1)'
                ],
                borderWidth: 1
            }]
        };

        const benefitsChartCtx = document.getElementById('beneficiosChart').getContext('2d');
        new Chart(benefitsChartCtx, {
            type: 'bar',
            data: benefitsData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 110,
                        ticks: {
                            callback: function(value) {
                                return value + '%'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                           title: tooltipTitleCallback
                        }
                    }
                }
            }
        });

        const clavesExitoLabels = [
            'Involucramiento de la Gerencia', 
            'Conciencia de Puestos Claves', 
            'Comunicaci√≥n Efectiva', 
            'Disponibilidad de Recursos', 
            'Contraparte Definida'
        ];
        
        const clavesExitoData = {
            labels: clavesExitoLabels.map(wrapLabel),
            datasets: [{
                label: 'Importancia',
                data: [30, 25, 15, 20, 10],
                backgroundColor: [
                    '#374C80',
                    '#7A5195',
                    '#BC5090',
                    '#EF5675',
                    '#FF764A'
                ],
                hoverOffset: 4
            }]
        };

        const clavesExitoChartCtx = document.getElementById('clavesExitoChart').getContext('2d');
        new Chart(clavesExitoChartCtx, {
            type: 'doughnut',
            data: clavesExitoData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                           boxWidth: 20
                        }
                    }
                    ,
                    tooltip: {
                        callbacks: {
                           title: tooltipTitleCallback
                        }
                    }
                }
            }
        });

        // =========================================================================
        // Configuraci√≥n e Inicializaci√≥n de Firebase para el Contador de Vistas
        // =========================================================================

        // Importa las funciones necesarias de Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const viewCounterElement = document.getElementById('view-counter');
        let app;
        let db;
        let auth;
        let appId;

        // === ¬°¬°¬°MUY IMPORTANTE!!! ===
        // Debes REEMPLAZAR los valores de este objeto 'firebaseConfig'
        // con la CONFIGURACI√ìN REAL de tu proyecto Firebase.
        // PASOS:
        // 1. Ve a la Consola de Firebase: https://console.firebase.google.com/
        // 2. Selecciona tu proyecto.
        // 3. Haz clic en el icono de "Configuraci√≥n del proyecto" (el engranaje)
        //    junto a "Project overview" en la parte superior izquierda.
        // 4. Baja hasta la secci√≥n "Tus aplicaciones" y selecciona tu aplicaci√≥n web.
        // 5. Copia el objeto 'firebaseConfig' que se muestra all√≠ (se ver√° como el de abajo,
        //    pero con valores reales en lugar de "TU_API_KEY", etc.)
        // 6. PEGA ese objeto COMPLETO aqu√≠, reemplazando el placeholder actual.
        //    EJEMPLO:
        //    const firebaseConfig = {
        //         apiKey: "AIzaSyD-YOUR-REAL-API-KEY",
        //         authDomain: "your-project.firebaseapp.com",
        //         projectId: "your-project-id",
        //         storageBucket: "your-project.appspot.com",
        //         messagingSenderId: "1234567890",
        //         appId: "1:1234567890:web:abcdef123456"
        //    };
        const firebaseConfig = {
  apiKey: "AIzaSyDcqnSuSwl8YFi7SQ5PUO6KtXRzdy05KWw",
  authDomain: "miwebcontadorglobal.firebaseapp.com",
  projectId: "miwebcontadorglobal",
  storageBucket: "miwebcontadorglobal.firebasestorage.app",
  messagingSenderId: "517863533597",
  appId: "1:517863533597:web:5dc4ee791d86f61487aaf4"
};
        // ============================================================================================


        /**
         * Inicializa Firebase y luego llama a la funci√≥n para actualizar el contador.
         * Esta funci√≥n maneja la configuraci√≥n y posibles errores iniciales de Firebase.
         */
        async function initializeFirebaseAndCounter() {
            try {
                // El appId se obtiene del projectId de la configuraci√≥n de Firebase
                // Es importante usar el projectId para la ruta de Firestore de GitHub Pages
                appId = firebaseConfig.projectId; 
                
                // Si la configuraci√≥n de Firebase a√∫n contiene placeholders o est√° incompleta
                if (firebaseConfig.apiKey === "TU_API_KEY" || firebaseConfig.projectId === "TU_PROJECT_ID" || !firebaseConfig.apiKey || !firebaseConfig.projectId) {
                    console.error("Firebase config is incomplete or invalid. Please replace the placeholder values in 'firebaseConfig' with your actual Firebase project details from the Firebase Console.");
                    viewCounterElement.textContent = 'Error: Configuraci√≥n de Firebase vac√≠a o inv√°lida. ¬°Aseg√∫rate de reemplazar los placeholders!';
                    return; // Detener la ejecuci√≥n si la configuraci√≥n es inv√°lida
                }

                // Inicializa la aplicaci√≥n de Firebase
                app = initializeApp(firebaseConfig);
                // Obtiene la instancia de Firestore Database
                db = getFirestore(app);
                // Obtiene la instancia de Firebase Authentication
                auth = getAuth(app);

                console.log("Firebase initialized successfully."); // Log de √©xito en la consola del navegador

                // Una vez inicializado Firebase, procede a actualizar el contador de vistas
                await updateViewCounter();

            } catch (initError) {
                // Captura cualquier error durante la inicializaci√≥n de Firebase
                console.error("Error al inicializar Firebase: ", initError);
                viewCounterElement.textContent = `Error de inicio: ${initError.message || 'Error desconocido al inicializar Firebase'}.`;
            }
        }

        /**
         * Funci√≥n as√≠ncrona para actualizar y mostrar el contador de vistas global.
         * Utiliza Firestore para almacenar el conteo de forma persistente.
         */
        async function updateViewCounter() {
            // Asegurarse de que las instancias de Firebase est√©n inicializadas
            // Y que appId tambi√©n est√© disponible y no sea el valor por defecto
            if (!db || !auth || typeof appId === 'undefined' || appId === 'default-app-id' || appId === 'TU_PROJECT_ID') {
                console.error("Firebase database, auth, or appId not initialized correctly or missing before calling updateViewCounter.");
                viewCounterElement.textContent = 'Error: Dependencias de Firebase no inicializadas correctamente o ID de App no definido.';
                return;
            }

            // Ruta al documento en Firestore donde se almacenar√° el contador de vistas.
            // Esta ruta utiliza el 'projectId' de tu Firebase Config como el 'appId' para GitHub Pages.
            const collectionPath = `artifacts/${appId}/public/data/views`;
            const docRef = doc(db, collectionPath, 'pageViews'); // Documento espec√≠fico para el contador de la p√°gina

            try {
                // Para GitHub Pages, nos autenticamos an√≥nimamente
                await signInAnonymously(auth);
                console.log("Signed in anonymously for view counter.");

                // Ejecuta una transacci√≥n de Firestore para asegurar que el incremento del contador sea at√≥mico.
                await runTransaction(db, async (transaction) => {
                    const sfDoc = await transaction.get(docRef); // Obtiene el estado actual del documento del contador
                    if (!sfDoc.exists()) {
                        // Si el documento del contador no existe en Firestore, lo crea con un conteo de 1
                        transaction.set(docRef, { count: 1 });
                        viewCounterElement.textContent = 'Visitas: 1';
                    } else {
                        // Si el documento existe, incrementa el conteo en 1
                        const newCount = sfDoc.data().count + 1;
                        transaction.update(docRef, { count: newCount });
                        viewCounterElement.textContent = `Visitas: ${newCount}`;
                    }
                });
            } catch (e) {
                // Manejo de errores detallado durante la operaci√≥n de Firestore
                console.error("Error al actualizar el contador de vistas con Firebase: ", e);
                // Proporciona mensajes de error m√°s espec√≠ficos al usuario en la interfaz
                if (e.code === 'auth/api-key-not-valid') {
                     viewCounterElement.textContent = 'Error: Clave API de Firebase inv√°lida. Aseg√∫rate de haberla copiado correctamente.';
                } else if (e.code === 'permission-denied') {
                    viewCounterElement.textContent = 'Error: Permisos insuficientes en Firestore. Revisa tus reglas de seguridad en Firebase.';
                } else if (e.code === 'unavailable') {
                    viewCounterElement.textContent = 'Error: Conexi√≥n con Firestore no disponible. Revisa tu conexi√≥n a internet o el estado del servicio de Firebase.';
                } else {
                    viewCounterElement.textContent = `Error del contador: ${e.message || 'Error desconocido al actualizar visitas'}`;
                }
            }
        }

        // Llama a la funci√≥n de inicializaci√≥n de Firebase y el contador cuando la ventana ha cargado completamente
        window.onload = initializeFirebaseAndCounter;
    </script>

</body>
</html>
